(("undefined"!=typeof globalThis?globalThis:self)["makoChunk_react-map-ol"]=("undefined"!=typeof globalThis?globalThis:self)["makoChunk_react-map-ol"]||[]).push([["1c151fd9"],{"1c151fd9":function(e,t,n){n.d(t,"__esModule",{value:!0}),n.e(t,{default:function(){return A;}});var r=n("777fffbe"),a=n("852bbaa9"),o=n("e6ebd2e4"),i=a._(o),l=n("8477ee07"),c=n("5b9bd509"),u=n("35b20a65"),f=n("5573caf5"),d=n("f4649146"),s=r._(d),m=n("50b320df"),h=r._(m),b=n("dc1314d5"),p=r._(b),y=n("0cdd686b"),v=n("429af387");function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r;}var k=(0,c.styled)(h.default).withConfig({displayName:"StyledForm",componentId:"dumi-theme-antv-c7ef__sc-1e7udwn-0"})([".ant-form-item:last-child{margin-bottom:8px;}"]),S=function(){var e,t=(0,y.useIntl)().formatMessage,n=(function(e){if(Array.isArray(e))return e;}(e=h.default.useForm())||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,i,l=[],c=!0,u=!1;try{for(o=(n=n.call(e)).next;!(c=(r=o.call(n)).done)&&(l.push(r.value),1!==l.length);c=!0);}catch(e){u=!0,a=e;}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return;}finally{if(u)throw a;}}return l;}}(e,1)||function(e,t){if(e){if("string"==typeof e)return g(e,1);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return g(e,1);}}(e,1)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}())[0],r=(0,u.useSnapshot)(f.feedbackStore),a=(0,y.useLocale)().id,o=function(){n.resetFields(),(0,f.resetSectionFeedback)();},l=(0,v.useFeedbackService)(),c=l.submitFeedback,d=l.showFeedbackResult;return i.default.createElement(k,{name:"section-feedback-form",form:n,layout:"vertical",onFinish:function(e){c({comment:e.comment}).then(function(){o(),d(!0);}).catch(function(){d(!1);});}},i.default.createElement(h.default.Item,{name:"comment",label:i.default.createElement("div",null,t({id:"\u4F60\u8BA4\u4E3A"})," ",i.default.createElement("b",null,"zh"===a?"\u300C":'"',r.section,"zh"===a?"\u300D":'"')," ",t({id:"\u90E8\u5206\u5982\u4F55\u6539\u8FDB\u66F4\u597D\uFF1F"}))},i.default.createElement(p.default.TextArea,{rows:3})),i.default.createElement(h.default.Item,{style:{textAlign:"right"}},i.default.createElement(s.default,{htmlType:"button",type:"text",size:"small",onClick:o,style:{marginRight:8}},t({id:"\u53D6\u6D88"})),i.default.createElement(s.default,{type:"primary",htmlType:"submit",size:"small"},t({id:"\u63D0\u4EA4"}))));};function E(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r;}var w=c.styled.div.withConfig({displayName:"StyledWrapper",componentId:"dumi-theme-antv-c7ef__sc-vcamqv-0"})(["background-color:#fff;border-radius:12px;box-shadow:0 0.5rem 1.2rem #f0f1f2;transition:height 0.3s ease-in-out;width:262px;position:fixed;z-index:1001;padding:10px 18px;border-radius:8px;transition:top 0.3s ease-in-out,right 0.3s ease-in-out;"]),A=function(){var e,t=(0,u.useSnapshot)(f.feedbackStore),n=(0,l.useLocation)();(0,i.useEffect)(function(){var e=new MutationObserver(function(){var e=document.querySelectorAll(".comment-link");if(e&&0!==e.length){var t=function(e){var t=e.target.closest(".comment-link");(0,f.invokeSectionFeedback)(t.getAttribute("data-feedback-hash"));};return e.forEach(function(e){e.addEventListener("click",t);}),function(){e.forEach(function(e){e.removeEventListener("click",t);});};}});return e.observe(document.body,{childList:!0,subtree:!0}),function(){e.disconnect();};},[]);var r=function(e){if(Array.isArray(e))return e;}(e=(0,i.useState)({top:0,right:12}))||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,i,l=[],c=!0,u=!1;try{for(o=(n=n.call(e)).next;!(c=(r=o.call(n)).done)&&(l.push(r.value),2!==l.length);c=!0);}catch(e){u=!0,a=e;}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return;}finally{if(u)throw a;}}return l;}}(e,2)||function(e,t){if(e){if("string"==typeof e)return E(e,2);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return E(e,2);}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}(),a=r[0],o=r[1];return((0,i.useEffect)(function(){var e=function(e){var n=e.target.closest(".comment-link");if(t.section&&n){var r=CSS.escape(t.section),a=x(e,document.querySelectorAll(".comment-link[data-feedback-hash=".concat(r,"]")));a&&o({top:Math.min(Math.max(a.getBoundingClientRect().top,0),window.innerHeight-380),right:12});}};return window.addEventListener("click",e),function(){window.removeEventListener("click",e);};},[t.section]),(0,i.useEffect)(function(){(0,f.resetSectionFeedback)();},[n.pathname]),t.section)?i.default.createElement(w,{style:{top:a.top,right:a.right}},i.default.createElement(S,null)):null;},x=function(e,t){var n=null,r=1/0;return t.forEach(function(t){var a=t.getBoundingClientRect(),o=Math.sqrt(Math.pow(a.left+a.width/2-e.clientX,2)+Math.pow(a.top+a.height/2-e.clientY,2));o<r&&(r=o,n=t);}),n;};}}]);
//# sourceMappingURL=1c151fd9-async.ec99082a.js.map